-- ============================================================================
-- COSMOS DATABASE SEED DATA
-- ============================================================================
-- This script populates the database with initial test data for development.
-- Run after 001_initial_schema.sql
--
-- Usage:
--   docker exec -i supabase-db psql -U postgres < scripts/migrations/002_seed_data.sql
-- ============================================================================

BEGIN;

-- ============================================================================
-- USERS
-- ============================================================================
INSERT INTO users (id, username, display_name, email, avatar_url, bio, job_title, created_at) VALUES
('00000000-0000-0000-0000-000000000001', 'you', 'You', 'you@example.com', 'https://avatar.vercel.sh/you.png', 'Designer & Creative', 'Senior Product Designer', NOW()),
('00000000-0000-0000-0000-000000000002', 'alex', 'Alex Chen', 'alex@example.com', 'https://avatar.vercel.sh/alex.png', 'Product Designer', 'Lead Product Designer', '2024-01-15T00:00:00.000Z'),
('00000000-0000-0000-0000-000000000003', 'sarah', 'Sarah Johnson', 'sarah@example.com', 'https://avatar.vercel.sh/sarah.png', 'UX Designer & Illustrator', 'UX Designer', '2024-02-10T00:00:00.000Z'),
('00000000-0000-0000-0000-000000000004', 'mike', 'Mike Rodriguez', 'mike@example.com', 'https://avatar.vercel.sh/mike.png', NULL, 'UI Designer', '2024-03-05T00:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- TEAMS
-- ============================================================================
INSERT INTO teams (id, name, slug, description, avatar_url, created_at) VALUES
('10000000-0000-0000-0000-000000000001', 'Design Team', 'design-team', 'Primary design team working on product interfaces', 'https://avatar.vercel.sh/design-team.png', '2024-01-01T00:00:00.000Z'),
('10000000-0000-0000-0000-000000000002', 'Marketing Team', 'marketing-team', 'Marketing and brand design', 'https://avatar.vercel.sh/marketing-team.png', '2024-01-05T00:00:00.000Z'),
('10000000-0000-0000-0000-000000000003', 'Product Team', 'product-team', 'Product strategy and UX research', 'https://avatar.vercel.sh/product-team.png', '2024-01-10T00:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- TEAM MEMBERS
-- ============================================================================
INSERT INTO team_members (team_id, user_id, role, joined_at) VALUES
-- Design Team
('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'owner', '2024-01-01T00:00:00.000Z'),
('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', 'admin', '2024-01-15T00:00:00.000Z'),

-- Marketing Team  
('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000004', 'admin', '2024-01-05T00:00:00.000Z'),

-- Product Team
('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000003', 'owner', '2024-01-10T00:00:00.000Z')
ON CONFLICT (team_id, user_id) DO NOTHING;

-- ============================================================================
-- STREAMS
-- ============================================================================
INSERT INTO streams (id, name, description, cover_image_url, owner_type, owner_id, is_private, status, created_at) VALUES
-- User streams
('20000000-0000-0000-0000-000000000001', 'design-inspiration', 'Design inspiration and references', NULL, 'user', '00000000-0000-0000-0000-000000000001', false, 'active', '2024-01-05T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000002', 'ui-patterns', 'Useful UI patterns and components', NULL, 'user', '00000000-0000-0000-0000-000000000001', false, 'active', '2024-01-10T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000003', 'mobile-designs', 'Mobile app design examples', NULL, 'user', '00000000-0000-0000-0000-000000000002', false, 'active', '2024-01-20T00:00:00.000Z'),

-- Team streams
('20000000-0000-0000-0000-000000000004', 'brand-assets', 'Brand guidelines and assets', NULL, 'team', '10000000-0000-0000-0000-000000000002', false, 'active', '2024-02-01T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000005', 'product-research', 'User research and insights', NULL, 'team', '10000000-0000-0000-0000-000000000003', true, 'active', '2024-02-15T00:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- STREAM MEMBERS
-- ============================================================================
INSERT INTO stream_members (stream_id, user_id, role, joined_at) VALUES
-- design-inspiration
('20000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'owner', '2024-01-05T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', 'member', '2024-01-06T00:00:00.000Z'),

-- ui-patterns
('20000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'owner', '2024-01-10T00:00:00.000Z'),

-- mobile-designs
('20000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', 'owner', '2024-01-20T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000003', 'member', '2024-01-25T00:00:00.000Z'),

-- brand-assets
('20000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000004', 'owner', '2024-02-01T00:00:00.000Z'),

-- product-research
('20000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000003', 'owner', '2024-02-15T00:00:00.000Z'),
('20000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'member', '2024-02-16T00:00:00.000Z')
ON CONFLICT (stream_id, user_id) DO NOTHING;

-- ============================================================================
-- STREAM RESOURCES
-- ============================================================================
INSERT INTO stream_resources (id, stream_id, title, url, resource_type, display_order, created_at) VALUES
('30000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', 'Figma Design System', 'https://figma.com/file/abc123', 'figma', 1, '2024-01-05T01:00:00.000Z'),
('30000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000001', 'Design Sprint Notes', 'https://notion.so/design-sprint', 'notion', 2, '2024-01-05T02:00:00.000Z'),
('30000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000004', 'Brand Guidelines', 'https://www.dropbox.com/brand-guide.pdf', 'other', 1, '2024-02-01T01:00:00.000Z'),
('30000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000005', 'User Research PRD', 'https://docs.google.com/document/research-prd', 'prd', 1, '2024-02-15T01:00:00.000Z'),
('30000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000005', 'Research Jira Board', 'https://jira.com/board/research', 'jira', 2, '2024-02-15T02:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- ASSETS (Sample design assets)
-- ============================================================================
INSERT INTO assets (id, title, type, url, thumbnail_url, uploader_id, width, height, dominant_color, color_palette, created_at) VALUES
('40000000-0000-0000-0000-000000000001', 'Modern Dashboard Design', 'image', '/uploads/dashboard-1.png', '/uploads/dashboard-1-thumb.png', '00000000-0000-0000-0000-000000000001', 1920, 1080, '#4F46E5', ARRAY['#4F46E5', '#818CF8', '#F3F4F6', '#1F2937'], '2024-01-15T00:00:00.000Z'),
('40000000-0000-0000-0000-000000000002', 'Mobile App Mockup', 'image', '/uploads/mobile-1.png', '/uploads/mobile-1-thumb.png', '00000000-0000-0000-0000-000000000002', 1125, 2436, '#10B981', ARRAY['#10B981', '#34D399', '#FFFFFF', '#1F2937'], '2024-01-20T00:00:00.000Z'),
('40000000-0000-0000-0000-000000000003', 'Landing Page Hero', 'image', '/uploads/hero-1.png', '/uploads/hero-1-thumb.png', '00000000-0000-0000-0000-000000000001', 1920, 1080, '#EF4444', ARRAY['#EF4444', '#F87171', '#FECACA', '#1F2937'], '2024-01-25T00:00:00.000Z'),
('40000000-0000-0000-0000-000000000004', 'Component Library', 'image', '/uploads/components-1.png', '/uploads/components-1-thumb.png', '00000000-0000-0000-0000-000000000002', 2560, 1440, '#8B5CF6', ARRAY['#8B5CF6', '#A78BFA', '#C4B5FD', '#F3F4F6'], '2024-02-01T00:00:00.000Z'),
('40000000-0000-0000-0000-000000000005', 'Branding Concept', 'image', '/uploads/brand-1.png', '/uploads/brand-1-thumb.png', '00000000-0000-0000-0000-000000000003', 1920, 1080, '#F59E0B', ARRAY['#F59E0B', '#FCD34D', '#FFFFFF', '#1F2937'], '2024-02-10T00:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- ASSET_STREAMS (Many-to-many relationship)
-- ============================================================================
INSERT INTO asset_streams (asset_id, stream_id, added_by, added_at) VALUES
-- design-inspiration stream
('40000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '2024-01-15T00:00:00.000Z'),
('40000000-0000-0000-0000-000000000003', '20000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '2024-01-25T00:00:00.000Z'),

-- ui-patterns stream
('40000000-0000-0000-0000-000000000004', '20000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '2024-02-01T00:00:00.000Z'),

-- mobile-designs stream
('40000000-0000-0000-0000-000000000002', '20000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', '2024-01-20T00:00:00.000Z'),

-- brand-assets stream
('40000000-0000-0000-0000-000000000005', '20000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000004', '2024-02-10T00:00:00.000Z')
ON CONFLICT (asset_id, stream_id) DO NOTHING;

-- ============================================================================
-- ASSET_LIKES
-- ============================================================================
INSERT INTO asset_likes (asset_id, user_id, created_at) VALUES
('40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '2024-01-15T01:00:00.000Z'),
('40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000003', '2024-01-15T02:00:00.000Z'),
('40000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '2024-01-20T01:00:00.000Z'),
('40000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000003', '2024-01-20T02:00:00.000Z'),
('40000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', '2024-01-25T01:00:00.000Z'),
('40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '2024-02-01T01:00:00.000Z'),
('40000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000002', '2024-02-10T01:00:00.000Z')
ON CONFLICT (asset_id, user_id) DO NOTHING;

-- ============================================================================
-- ASSET_COMMENTS
-- ============================================================================
INSERT INTO asset_comments (id, asset_id, user_id, content, parent_id, created_at) VALUES
-- Comments on Modern Dashboard Design
('50000000-0000-0000-0000-000000000001', '40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', 'Love the color scheme! Very modern.', NULL, '2024-01-15T03:00:00.000Z'),
('50000000-0000-0000-0000-000000000002', '40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Thanks! Went with indigo as the primary.', '50000000-0000-0000-0000-000000000001', '2024-01-15T03:30:00.000Z'),

-- Comments on Mobile App Mockup
('50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000003', 'The navigation is really intuitive!', NULL, '2024-01-20T03:00:00.000Z'),

-- Comments on Component Library
('50000000-0000-0000-0000-000000000004', '40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'Great work on the button variants!', NULL, '2024-02-01T02:00:00.000Z'),
('50000000-0000-0000-0000-000000000005', '40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000002', 'Thank you! Still working on dark mode support.', '50000000-0000-0000-0000-000000000004', '2024-02-01T02:30:00.000Z')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- USER_FOLLOWS
-- ============================================================================
INSERT INTO user_follows (follower_id, following_id, created_at) VALUES
-- You follows Alex, Sarah
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '2024-01-16T00:00:00.000Z'),
('00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000003', '2024-02-11T00:00:00.000Z'),

-- Alex follows You, Sarah
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '2024-01-20T00:00:00.000Z'),
('00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000003', '2024-02-12T00:00:00.000Z'),

-- Sarah follows You
('00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '2024-02-15T00:00:00.000Z'),

-- Mike follows Alex
('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000002', '2024-03-06T00:00:00.000Z')
ON CONFLICT (follower_id, following_id) DO NOTHING;

-- ============================================================================
-- NOTIFICATIONS
-- ============================================================================
INSERT INTO notifications (id, type, recipient_id, actor_id, resource_id, resource_type, is_read, created_at) VALUES
('60000000-0000-0000-0000-000000000001', 'like_asset', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', '40000000-0000-0000-0000-000000000001', 'asset', false, '2024-01-15T01:00:00.000Z'),
('60000000-0000-0000-0000-000000000002', 'reply_comment', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000002', 'comment', true, '2024-01-15T03:30:00.000Z'),
('60000000-0000-0000-0000-000000000003', 'follow', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', NULL, NULL, true, '2024-01-16T00:00:00.000Z'),
('60000000-0000-0000-0000-000000000004', 'like_asset', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '40000000-0000-0000-0000-000000000002', 'asset', false, '2024-01-20T01:00:00.000Z'),
('60000000-0000-0000-0000-000000000005', 'follow', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000002', NULL, NULL, true, '2024-01-20T00:00:00.000Z')
ON CONFLICT (id) DO NOTHING;

COMMIT;

-- ============================================================================
-- VERIFICATION QUERIES
-- ============================================================================
-- Run these to verify the data was inserted correctly:

-- SELECT COUNT(*) as user_count FROM users;
-- SELECT COUNT(*) as team_count FROM teams;
-- SELECT COUNT(*) as stream_count FROM streams;
-- SELECT COUNT(*) as asset_count FROM assets;
-- SELECT COUNT(*) as comment_count FROM asset_comments;
-- SELECT COUNT(*) as notification_count FROM notifications;

-- ============================================================================
-- SUMMARY
-- ============================================================================
-- ✓ 4 users
-- ✓ 3 teams with 4 team members
-- ✓ 5 streams with 8 stream members
-- ✓ 5 stream resources
-- ✓ 5 assets
-- ✓ 5 asset-stream relationships
-- ✓ 7 likes
-- ✓ 5 comments (including 2 replies)
-- ✓ 6 follow relationships
-- ✓ 5 notifications
-- ============================================================================

